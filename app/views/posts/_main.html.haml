.main
  .section
    .calorie_chart.col-sm-9
      .calorie_graph
        %canvas(id="myChart2" width="700" height="100")
        :javascript
          var ctx = document.getElementById('myChart2').getContext('2d');
          var myChart = new Chart(ctx, {
              type: 'horizontalBar',
              data: {
                  labels: ['ï¼‘æ—¥ã®ç›®æ¨™ã‚«ãƒ­ãƒªãƒ¼ï¼š' + gon.standard, 'ä»Šæ—¥ã®æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼ï¼š' + gon.today_sum],
                  datasets: [{
                      label: 'ä»Šæ—¥ã®æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼',
                      data: [gon.standard, gon.today_sum],
                      backgroundColor: [
                          'rgba(255, 99, 132, 0.2)',
                          'rgba(54, 162, 235, 0.2)',
                      ],
                      borderColor: [
                          'rgba(255,99,132,1)',
                          'rgba(54, 162, 235, 1)',
                      ],
                      borderWidth: 1
                  }]
              },
              options: {
                  scales: {
                      xAxes: [{
                          ticks: {
                              beginAtZero:true,
                              suggestedMin: 50,
                              suggestedMax: 100
                          }
                      }]
                  }
              }
          });
      .today_calorie
        %p
        - if user_signed_in?
          .standard_calorie
            %a ï¼‘æ—¥ã‚ãŸã‚Šã®ç›®æ¨™ã‚«ãƒ­ãƒªãƒ¼ã¯
            = link_to charts_path(current_user.id), class: 'difference' do
              = @calorie_standard
            ã‚­ãƒ­ã‚«ãƒ­ãƒªãƒ¼ä»¥ä¸‹ã§ã™ã€‚

          .sum_calorie
            ä»Šæ—¥ã®æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼ã¯
            = link_to charts_path(current_user.id), class: 'difference' do
              = @calorie_sum
            ã‚­ãƒ­ã‚«ãƒ­ãƒªãƒ¼ã§ã™ã€‚
          %hr
          - if @calorie_standard >= @calorie_sum
            ç›®æ¨™ã‚«ãƒ­ãƒªãƒ¼ã‚’
            = link_to charts_path(current_user.id), class: 'difference' do
              = @difference
            ã‚­ãƒ­ã‚«ãƒ­ãƒªãƒ¼ä¸‹å›ã£ã¦ã„ã¾ã™ã€‚
            %p ç›®æ¨™ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã„ã¾ã™ã€‚ç´ æ™´ã‚‰ã—ã„ğŸ˜„ ğŸ‰
          - else
            ç›®æ¨™ã‚«ãƒ­ãƒªãƒ¼ã‚ˆã‚Š
            = link_to charts_path(current_user.id), class: 'difference' do
              = @difference
            ã‚­ãƒ­ã‚«ãƒ­ãƒªãƒ¼ ã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚
            %p æ˜æ—¥ã‹ã‚‰ã¾ãŸé ‘å¼µã£ã¦ã„ãã¾ã—ã‚‡ã†ğŸ˜Œ ğŸ’ªï¼
        - else
          .standard_calorie
            %a ï¼‘æ—¥ã‚ãŸã‚Šã®ç›®æ¨™ã‚«ãƒ­ãƒªãƒ¼ã¯
            = link_to charts_path(@sampleuser.id), class: 'difference' do
              = @calorie_standard
            ã‚­ãƒ­ã‚«ãƒ­ãƒªãƒ¼ä»¥ä¸‹ã§ã™ã€‚

          .sum_calorie
            ä»Šæ—¥ã®æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼ã¯
            = link_to charts_path(@sampleuser.id), class: 'difference' do
              = @calorie_sum
            ã‚­ãƒ­ã‚«ãƒ­ãƒªãƒ¼ã§ã™ã€‚
          %hr
          - if @calorie_standard >= @calorie_sum
            ç›®æ¨™ã‚«ãƒ­ãƒªãƒ¼ã‚’
            = link_to charts_path(@sampleuser.id), class: 'difference' do
              = @difference
            ã‚­ãƒ­ã‚«ãƒ­ãƒªãƒ¼ ä¸‹å›ã£ã¦ã„ã¾ã™ã€‚
            %p ç›®æ¨™ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã„ã¾ã™ã€‚ç´ æ™´ã‚‰ã—ã„ï¼
          - else
            ç›®æ¨™ã‚«ãƒ­ãƒªãƒ¼ã‚ˆã‚Š
            = link_to charts_path(@sampleuser.id), class: 'difference' do
              = @difference
            ã‚­ãƒ­ã‚«ãƒ­ãƒªãƒ¼ ã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚
            %p æ˜æ—¥ã‹ã‚‰ã¾ãŸé ‘å¼µã£ã¦ã„ãã¾ã—ã‚‡ã†ï¼
      %hr
    .new-post.col-sm-9
      = form_with model: @post, id: 'new_post' do |f|
        .input-box
          .required
            ã€å¿…é ˆã€‘
          %table.col-sm-12
            %thead
              %tr
                %th.food é£Ÿã¹ãŸã‚‚ã®
                %th.calorie ã‚«ãƒ­ãƒªãƒ¼
            %tbody.table-body.table-line
              %tr
                %td 
                  = f.text_field :food, placeholder: 'ä¾‹ï¼‰ã‚µãƒ©ãƒ€'
                %td 
                  = f.number_field :calorie, step: '0.1', placeholder: 'ä¾‹ï¼‰200'
          .text.col-sm-12
            .any
              ã€ä»»æ„ã€‘
            = f.text_area :text, placeholder: 'ãªã«ãŸã¹ãŸï¼Ÿ', class: 'post-textarea'
          .icon
            %label{class: "input-box__image"}
              = icon('fas', 'image')
              = f.file_field :image, class: 'input-box-file'
          .weight-and-btn
            .any
              ã€ä»»æ„ã€‘
            .weight
              ä½“é‡
              = f.number_field :weight, step: '0.1', placeholder: 'ä¾‹ï¼‰70'
              kg
          .btn-post
            .btn-square
              = f.submit 'æŠ•ç¨¿ã™ã‚‹', class: 'post-btn'
    .posts
      = render @posts
      = paginate(@posts)
